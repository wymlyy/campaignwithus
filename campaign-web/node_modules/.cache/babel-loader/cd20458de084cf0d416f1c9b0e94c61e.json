{"ast":null,"code":"var _jsxFileName = \"D:\\\\signup form\\\\Campaign-with-us\\\\campaign-web\\\\src\\\\components\\\\pages\\\\EditPost.jsx\";\nimport React, { useState, useEffect } from \"react\";\nimport ReactHtmlParser, { processNodes, convertNodeToElement, htmlparser2 } from 'react-html-parser';\nimport { Editor } from \"react-draft-wysiwyg\";\nimport { EditorState, convertToRaw } from \"draft-js\";\nimport { stateToHTML } from \"draft-js-export-html\";\nimport DatePicker from \"react-datepicker\";\nimport { useParams } from 'react-router-dom';\nimport axios from \"axios\";\nimport moment from \"moment\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport \"./textEditor.css\";\nimport \"react-draft-wysiwyg/dist/react-draft-wysiwyg.css\";\nimport validate from \"../accountBox/validateInfoPost\";\nimport useForm3 from \"../accountBox/useForm3\";\n\nconst EditPost = submitForm => {\n  const {\n    saveEdit,\n    postText,\n    errors\n  } = useForm3(submitForm, validate);\n  let {\n    id\n  } = useParams();\n  const [postObject, setPostObject] = useState({});\n  useEffect(() => {\n    axios.get(`http://localhost:5000/posts/byId/${id}`).then(response => {\n      setPostObject(response.data);\n    });\n  }, []);\n  const [values, setValues] = useState({\n    topic: postObject.topic,\n    username: postObject.username,\n    title: postObject.title,\n    location: postObject.location\n  });\n  const [editorState, setEditorState] = useState(EditorState.createEmpty());\n  const [startDate, setStartDate] = useState(postObject.startDate);\n\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setValues({ ...values,\n      [name]: value\n    });\n  };\n\n  const handleTime = date => {\n    setStartDate(date);\n  };\n\n  const onEditorStateChange = editorState => {\n    setEditorState(editorState);\n  };\n\n  const editPost = () => {\n    if (Object.keys(errors).length === 0) {\n      axios.put(`http://localhost:5000/posts/byId/${id}`, {\n        topic: postObject.topic,\n        startDate: postObject.startDate,\n        location: postObject.location,\n        username: postObject.username,\n        title: postObject.title,\n        postText: postObject.postText\n      }, {\n        headers: {\n          accessToken: localStorage.getItem(\"accessToken\")\n        }\n      }).then(response => {\n        window.location.href = `/post/${id}`;\n      });\n    }\n  };\n\n  const uploadCallback = file => {\n    return new Promise((resolve, reject) => {\n      if (file) {\n        let reader = new FileReader();\n\n        reader.onload = e => {\n          resolve({\n            data: {\n              link: e.target.result\n            }\n          });\n        };\n\n        reader.readAsDataURL(file);\n      }\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    id: \"postForm\",\n    onSubmit: editPost,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"postPageTitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, \"Create Your Own Campaign !\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"selectInfo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"selectTopic\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }, \"Select One Topic:\"), /*#__PURE__*/React.createElement(\"select\", {\n    id: \"topicSelection\",\n    className: \"topic\",\n    name: \"topic\",\n    value: postObject.topic,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"none\",\n    hidden: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 15\n    }\n  }, \"Select a topic\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"sports\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 15\n    }\n  }, \"Sports\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Marketing\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 15\n    }\n  }, \"Marketing\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"education\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 15\n    }\n  }, \"Education\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"society\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 15\n    }\n  }, \"Society\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"other\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 15\n    }\n  }, \"Other\")), errors.topic && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"errors\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 30\n    }\n  }, errors.topic)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"selectTime\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }, \"Select Date and Time:\"), /*#__PURE__*/React.createElement(DatePicker, {\n    className: \"datepick\",\n    dateFormat: \"yyyy-MM-dd HH:mm\",\n    timeFormat: \"hh:mm\",\n    selected: startDate,\n    name: \"startDate\",\n    value: moment(postObject.startDate).format(\"DD-MM-YYYY HH:mm\"),\n    onChange: handleTime,\n    showTimeSelect: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }), errors.startDate && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"errors\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 34\n    }\n  }, errors.startDate))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"otherInfo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"campaignLocation\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, \"Location:\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"locationInput\",\n    type: \"text\",\n    name: \"location\",\n    value: postObject.location,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  }), errors.location && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"errors\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 33\n    }\n  }, errors.location)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"authorName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }\n  }, \"Author:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"author\",\n    name: \"username\",\n    value: postObject.username,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }\n  }), errors.username && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"errors\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 33\n    }\n  }, errors.username))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"postTitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 11\n    }\n  }, \"Title:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"titleInput\",\n    name: \"title\",\n    value: postObject.title,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 11\n    }\n  }), errors.title && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"errors\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 28\n    }\n  }, errors.title)), /*#__PURE__*/React.createElement(Editor, {\n    name: \"postText\",\n    value: ReactHtmlParser(postObject.postText),\n    editorState: editorState,\n    toolbarClassName: \"toolbarClassName\",\n    wrapperClassName: \"wrapperClassName\",\n    editorClassName: \"editorClassName\",\n    onEditorStateChange: onEditorStateChange,\n    toolbar: {\n      inline: {\n        inDropdown: true\n      },\n      list: {\n        inDropdown: true\n      },\n      textAlign: {\n        inDropdown: true\n      },\n      link: {\n        inDropdown: true\n      },\n      history: {\n        inDropdown: true\n      },\n      image: {\n        uploadEnabled: true,\n        uploadCallback: uploadCallback,\n        previewImage: true,\n        inputAccept: 'image/gif,image/jpeg,image/jpg,image/png,image/svg',\n        alt: {\n          present: false,\n          mandatory: false\n        },\n        defaultSize: {\n          height: 'auto',\n          width: 'auto'\n        }\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 9\n    }\n  }), errors.postText && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"errors-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 29\n    }\n  }, errors.postText), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"postBtnContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"postButton\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 11\n    }\n  }, \"Update\"))));\n};\n\nexport default EditPost;","map":{"version":3,"sources":["D:/signup form/Campaign-with-us/campaign-web/src/components/pages/EditPost.jsx"],"names":["React","useState","useEffect","ReactHtmlParser","processNodes","convertNodeToElement","htmlparser2","Editor","EditorState","convertToRaw","stateToHTML","DatePicker","useParams","axios","moment","validate","useForm3","EditPost","submitForm","saveEdit","postText","errors","id","postObject","setPostObject","get","then","response","data","values","setValues","topic","username","title","location","editorState","setEditorState","createEmpty","startDate","setStartDate","handleChange","e","name","value","target","handleTime","date","onEditorStateChange","editPost","Object","keys","length","put","headers","accessToken","localStorage","getItem","window","href","uploadCallback","file","Promise","resolve","reject","reader","FileReader","onload","link","result","readAsDataURL","format","inline","inDropdown","list","textAlign","history","image","uploadEnabled","previewImage","inputAccept","alt","present","mandatory","defaultSize","height","width"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport ReactHtmlParser, { processNodes, convertNodeToElement, htmlparser2 } from 'react-html-parser';\r\nimport { Editor } from \"react-draft-wysiwyg\";\r\nimport { EditorState,convertToRaw } from \"draft-js\";\r\nimport { stateToHTML } from \"draft-js-export-html\";\r\nimport DatePicker from \"react-datepicker\";\r\nimport { useParams } from 'react-router-dom';\r\nimport axios from \"axios\";\r\nimport moment from \"moment\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport \"./textEditor.css\";\r\nimport \"react-draft-wysiwyg/dist/react-draft-wysiwyg.css\";\r\nimport validate from \"../accountBox/validateInfoPost\";\r\nimport useForm3 from \"../accountBox/useForm3\";\r\n\r\n\r\n\r\nconst EditPost = (submitForm) => {\r\n  const { saveEdit, postText, errors } = useForm3(\r\n    submitForm,\r\n    validate\r\n  );\r\n  let { id } = useParams();\r\n  const [postObject, setPostObject] = useState({});\r\n\r\n  useEffect(() => {\r\n    axios.get(`http://localhost:5000/posts/byId/${id}`).then((response) => {\r\n      setPostObject(response.data);\r\n    });\r\n\r\n  }, []);\r\n\r\n  const [values, setValues] = useState({\r\n    topic: postObject.topic,\r\n    username: postObject.username,\r\n    title: postObject.title,\r\n    location: postObject.location\r\n\r\n  });\r\n  const [editorState, setEditorState] = useState(EditorState.createEmpty());\r\n  const [startDate, setStartDate] = useState(postObject.startDate);\r\n\r\n  const handleChange = e => {\r\n    const { name, value } = e.target;\r\n    setValues({\r\n      ...values,\r\n      [name]: value\r\n    });\r\n\r\n  };\r\n\r\n  const handleTime = (date) => {\r\n    setStartDate(date);\r\n  };\r\n  const onEditorStateChange = (editorState) => {\r\n    setEditorState(editorState);\r\n\r\n  }\r\n\r\n  const editPost = () => {\r\n    if (Object.keys(errors).length === 0) {\r\n      axios.put(`http://localhost:5000/posts/byId/${id}`, { topic: postObject.topic, startDate: postObject.startDate, location: postObject.location, username: postObject.username, title: postObject.title, postText: postObject.postText }, {\r\n        headers: { accessToken: localStorage.getItem(\"accessToken\") },\r\n      }).then((response) => {\r\n        window.location.href = `/post/${id}`;\r\n      });\r\n\r\n\r\n    }\r\n  }\r\n\r\n  const uploadCallback = (file) => {\r\n    return new Promise(\r\n      (resolve, reject) => {\r\n        if (file) {\r\n          let reader = new FileReader();\r\n          reader.onload = (e) => {\r\n            resolve({ data: { link: e.target.result } })\r\n          };\r\n          reader.readAsDataURL(file);\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <form id='postForm' onSubmit={editPost}>\r\n        <h1 className='postPageTitle'>Create Your Own Campaign !</h1>\r\n        <div className='selectInfo'>\r\n          <div className='selectTopic'>\r\n            <label>Select One Topic:</label>\r\n\r\n            <select id='topicSelection' className='topic' name='topic' value={postObject.topic} onChange={handleChange}>\r\n              <option value='none' hidden>Select a topic</option>\r\n              <option value='sports'>Sports</option>\r\n              <option value='Marketing'>Marketing</option>\r\n              <option value='education'>Education</option>\r\n              <option value='society'>Society</option>\r\n              <option value='other'>Other</option>\r\n            </select>\r\n            {errors.topic && <p className='errors'>{errors.topic}</p>}\r\n          </div>\r\n          <div className='selectTime'>\r\n            <label>Select Date and Time:</label>\r\n\r\n            <DatePicker className='datepick'\r\n              dateFormat=\"yyyy-MM-dd HH:mm\"\r\n              timeFormat=\"hh:mm\"\r\n              selected={startDate}\r\n              name='startDate'\r\n              value={moment(postObject.startDate).format(\"DD-MM-YYYY HH:mm\")}\r\n              onChange={handleTime}\r\n              showTimeSelect\r\n            />\r\n            {errors.startDate && <p className='errors'>{errors.startDate}</p>}\r\n          </div>\r\n\r\n        </div>\r\n        <div className=\"otherInfo\">\r\n          <div className=\"campaignLocation\">\r\n            <label>Location:</label>\r\n\r\n            <input className='locationInput' type=\"text\" name='location' value={postObject.location} onChange={handleChange} />\r\n            {errors.location && <p className='errors'>{errors.location}</p>}\r\n          </div>\r\n          <div className=\"authorName\">\r\n            <label>Author:</label>\r\n\r\n            <input type=\"text\" className=\"author\" name='username' value={postObject.username} onChange={handleChange} />\r\n            {errors.username && <p className='errors'>{errors.username}</p>}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"postTitle\">\r\n          <label>Title:</label>\r\n\r\n          <input type=\"text\" className=\"titleInput\" name='title' value={postObject.title} onChange={handleChange} />\r\n          {errors.title && <p className='errors'>{errors.title}</p>}\r\n        </div>\r\n\r\n        <Editor\r\n          name='postText'\r\n          value={ReactHtmlParser(postObject.postText)}\r\n          editorState={editorState}\r\n          toolbarClassName=\"toolbarClassName\"\r\n          wrapperClassName=\"wrapperClassName\"\r\n          editorClassName=\"editorClassName\"\r\n          onEditorStateChange={onEditorStateChange}\r\n          toolbar={{\r\n            inline: { inDropdown: true },\r\n            list: { inDropdown: true },\r\n            textAlign: { inDropdown: true },\r\n            link: { inDropdown: true },\r\n            history: { inDropdown: true },\r\n            image: {\r\n              uploadEnabled: true,\r\n              uploadCallback: uploadCallback,\r\n              previewImage: true,\r\n              inputAccept: 'image/gif,image/jpeg,image/jpg,image/png,image/svg',\r\n              alt: { present: false, mandatory: false },\r\n              defaultSize: {\r\n                height: 'auto',\r\n                width: 'auto',\r\n              },\r\n            },\r\n          }}\r\n        />\r\n        {errors.postText && <p className='errors-content'>{errors.postText}</p>}\r\n        <div className='postBtnContainer'>\r\n          <button className='postButton' type='submit'>\r\n            Update\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n\r\n}\r\nexport default EditPost;"]},"metadata":{},"sourceType":"module"}